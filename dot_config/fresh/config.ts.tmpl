kkimport { Editor } from "fresh";

Editor.on("init", (editor) => {
  // File Associations
  editor.setFileAssociations({
    // Standard shell files
    ".bashrc": "bash",
    ".bash_profile": "bash",
    ".bash_aliases": "bash",
    ".zshrc": "bash",
    ".profile": "bash",

    // Chezmoi & Scripting templates
    "*.tmpl": "bash",

    // --- OS-Specific File Types ---
    {{- if eq .osid "arch" }}
    "PKGBUILD": "bash",
    "*.install": "bash",
    {{- end }}

    // Web & Logic
    "*.ts": "typescript",
    "*.tsx": "typescript",
    "*.py": "python",
    "*.yaml": "yaml",
    "*.toml": "toml"
  });

  // Theme Settings
  editor.setTheme({
    "ui.background": "#1a1a1a",
    "token.keyword": "#569CD6",
    "token.string": "#CE9178",
    "token.comment": "#6A9955"
  });

  // --- Editor Behavior ---
  // Applying role-based configuration if needed
  try {
    editor.setEditorConfig({
      insertSpaces: true,
      tabSize: {{ if eq .role "server" }}2{{ else }}4{{ end }}, // Smaller tabs for server configs
      detectIndentation: true
    });
  } catch (e) {
    console.log("Could not apply editor config via setEditorConfig");
  }
});
