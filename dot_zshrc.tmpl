# GENERATED BY CHEZMOI - {{ .chezmoi.hostname }} ({{ .role }})

# --- 1. Universal PATH ---
# We set this first so that 'command -v' checks below actually succeed.
export PATH="$HOME/.local/bin:/usr/local/bin:$PATH"
export HISTFILE=~/.zsh_history

# --- 2. macOS-specific initialization ---
{{- if eq .chezmoi.os "darwin" }}
export PYENV_ROOT="$HOME/.pyenv"
command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

# Homebrew paths
export PATH="/opt/homebrew/bin:$PATH"

# zsh-autosuggestions (only if brew exists)
if command -v brew >/dev/null 2>&1; then
    BREW_PREFIX=$(brew --prefix)
    if [ -f "$BREW_PREFIX/share/zsh-autosuggestions/zsh-autosuggestions.zsh" ]; then
        source "$BREW_PREFIX/share/zsh-autosuggestions/zsh-autosuggestions.zsh"
    fi
fi
{{- end }}

# --- 3. Prompt & Zoxide ---
# PATH is now set, so these checks will find binaries in ~/.local/bin
if command -v starship >/dev/null 2>&1; then
    eval "$(starship init zsh)"
fi

if command -v zoxide >/dev/null 2>&1; then
    eval "$(zoxide init zsh --cmd cd)"
fi

# --- 4. Environment Extras ---
# fzf key bindings and completion
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# Claude Code / Node certs (Useful for your dev work with your wife)
if [ -f /etc/ssl/cert.pem ]; then
    export NODE_EXTRA_CA_CERTS=/etc/ssl/cert.pem
fi

# --- 5. Load Shared Aliases ---
# Fixed the typo from '.aliase' to '.aliases'
[[ -f ~/.aliases ]] && source ~/.aliases
