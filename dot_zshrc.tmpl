# GENERATED BY CHEZMOI - {{ index .chezmoi "hostname" | default "unknown-hostname" }} ({{ index . "role" | default "unknown-role" }})
#
# macOS-specific shell configuration

# Pyenv initialization
export PYENV_ROOT="$HOME/.pyenv"
command -v pyenv >/dev/null || export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"

# Homebrew paths (macOS specific)
export PATH="/usr/local/bin:/opt/homebrew/bin:$PATH"

# Add ~/.local/bin to PATH
if [[ ":$PATH:" != *":$HOME/.local/bin:"* ]]; then
    export PATH="$HOME/.local/bin:$PATH"
fi

# fzf key bindings and completion
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

# zsh-autosuggestions (if installed via Homebrew)
if [ -f $(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh ]; then
    source $(brew --prefix)/share/zsh-autosuggestions/zsh-autosuggestions.zsh
fi

# --------------------------------
# CLI / TUI aliases (always available)
# --------------------------------
alias m='micro'
alias px='ssh root@192.168.1.10'
alias sp='ssh root@192.168.1.10'

# Chezmoi shortcuts
alias cm='chezmoi'
alias cma='chezmoi apply -v'
alias cme='chezmoi edit'
alias cmd='chezmoi diff'
alias cmu='chezmoi update'
alias cmcd='chezmoi cd'
alias cmr='cmu && cma && source ~/.zshrc'

# Modern CLI replacements
alias ls='eza --icons --group-directories-first'
alias ll='eza -l --icons --group-directories-first'
alias la='eza -la --icons --group-directories-first'
alias lsa='eza -la --icons --group-directories-first'
alias lt='eza --tree --icons --group-directories-first'
alias cat='bat --paging=never'
alias find='fd'
alias grep='rg'

# System monitoring
alias meminfo='vm_stat'
alias diskinfo='df -h'
alias ports='lsof -iTCP -sTCP:LISTEN -n -P'

# Network utilities
alias myip='curl -s ifconfig.me'
alias localip='ifconfig | grep "inet " | grep -v 127.0.0.1'

# Git enhancements
alias gst='git status -sb'
alias glog='git log --oneline --graph --decorate --all'
alias gdiff='git diff --color-words'
alias gaa='git add --all'

# Quick config edits
alias reload='source ~/.zshrc'
alias zshrc='${EDITOR} ~/.zshrc && source ~/.zshrc'

# Useful functions
mkcd() {
    mkdir -p "$1" && cd "$1"
}

# Better history
export HISTSIZE=10000
export SAVEHIST=10000
export HISTFILE=~/.zsh_history

# Add Zscaler cert for Node.js (Claude Code)
export NODE_EXTRA_CA_CERTS=/etc/ssl/cert.pem

# --------------------
# Default applications
# --------------------
export EDITOR="micro"
export VISUAL="code"

{{- if eq .role "server" }}
# Initialize starship prompt
if command -v starship &> /dev/null; then
    eval "$(starship init zsh)"
fi
{{- end }}

# Initialize zoxide LAST
if command -v zoxide &> /dev/null; then
    eval "$(zoxide init zsh --cmd cd)"
fi
