# GENERATED BY CHEZMOI - {{ index .chezmoi "hostname" | default "unknown-hostname" }} ({{ index . "role" | default "unknown-role" }})
#
# If not running interactively, don't do anything (leave this at the top of this file)
[[ $- != *i* ]] && return

# Add ~/.local/bin and /usr/local/bin to PATH if not already there
if [[ ":$PATH:" != *":$HOME/.local/bin:"* ]]; then
    export PATH="$HOME/.local/bin:$PATH"
fi
if [[ ":$PATH:" != *":/usr/local/bin:"* ]]; then
    export PATH="/usr/local/bin:$PATH"
fi

# Rust / cargo
if [ -f "$HOME/.cargo/env" ]; then
  . "$HOME/.cargo/env"
fi

{{- if eq (index .chezmoi "osRelease").id "arch" }}
source ~/.local/share/omarchy/default/bash/rc
{{- else }}  # Add Omarchy-style shell aliases for non-Omarchy machines
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'
alias d='docker'
alias decompress='tar -xzf'
alias ff='fzf --preview '\''bat --style=numbers --color=always {}'\'''
alias g='git'
alias gcad='git commit -a --amend'
alias gcam='git commit -a -m'
alias gcm='git commit -m'
alias ls='eza -lh --group-directories-first --icons=auto'
alias lsa='ls -a'
alias lt='eza --tree --level=2 --long --icons --git'
alias lta='lt -a'
alias lg='lazygit'
alias ld='lazydocker'

# Debian-specific: Use better alternatives
alias cat='batcat'
alias bat='batcat'
alias fd='fdfind'
# Quick navigation
alias cdd='builtin cd /docker'

# Initialize starship prompt (only if installed)
if command -v starship >/dev/null 2>&1; then
  eval "$(starship init bash)"
fi
{{- end }}
# --------------------------------
# Shared environment for all roles
# --------------------------------
export GNOME_KEYRING_CONTROL="/run/user/$UID/keyring"


# --------------------
# Default applications
# --------------------
export EDITOR="micro"
export VISUAL="code"

# Terminal configuration
export TERMINFO="$HOME/.terminfo"  # Use user terminfo with RGB capability for truecolor

# --------------------------------
# CLI / TUI aliases (always available)
# --------------------------------
alias m='micro'
alias px='ssh root@192.168.1.10'
alias sp='ssh root@192.168.1.10'
# Chezmoi shortcuts
alias cm='chezmoi'
alias cma='chezmoi apply -v'
alias cme='chezmoi edit'
alias cmd='chezmoi diff'
alias cmu='chezmoi update'
alias cmcd='chezmoi cd'
alias cmhome='chezmoi cd'
alias cmr='cmu && cma && source ~/.bashrc'  # Reload the entire chezmoi config and refresh the shell
# System monitoring
alias meminfo='free -m -l -t'
alias diskinfo='lsblk -o NAME,SIZE,TYPE,MOUNTPOINT'
alias ports='ss -tulanp'
# Network utilities
alias myip='curl -s ifconfig.me'
alias localip='ip -br addr show'

# Docker shortcuts
alias dps='docker ps --format "table {{`{{.Names}}`}}\t{{`{{.Status}}`}}\t{{`{{.Ports}}`}}"'
alias dpsa='docker ps -a --format "table {{`{{.Names}}`}}\t{{`{{.Status}}`}}"'
alias dimg='docker images --format "table {{`{{.Repository}}`}}\t{{`{{.Tag}}`}}\t{{`{{.Size}}`}}"'
alias dclean='docker system prune -af'
alias dstats='docker stats --no-stream'

# Docker Compose shortcuts
alias dc='docker compose'
alias dcu='docker compose up -d'
alias dcd='docker compose down'
alias dcr='docker compose restart'
alias dcl='docker compose logs -f --tail=50'
alias dcp='docker compose pull'

# Git enhancements
alias gst='git status -sb'
alias glog='git log --oneline --graph --decorate --all'
alias gdiff='git diff --color-words'
alias gaa='git add --all'

# Quick config edits
alias reload='source ~/.bashrc'
alias bashrc='${EDITOR} ~/.bashrc && source ~/.bashrc'

# Yazi with shell wrapper
function y() {
    local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
    yazi "$@" --cwd-file="$tmp"
    if cwd="$(command cat -- "$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
        builtin cd -- "$cwd"
    fi
    rm -f -- "$tmp"
}
# -----------------------------
# GUI-only aliases and settings
# -----------------------------
{{- $role := index . "role" | default "" -}}
{{- if or (eq $role "desktop") (eq $role "laptop") }}
alias web='google-chrome-stable'
alias browser='google-chrome-stable'
alias chrome='google-chrome-stable'
alias ci='google-chrome-stable --incognito'
export BROWSER="google-chrome-stable"
{{- end }}

# Initialize zoxide LAST (for all non-Arch systems)
{{- if ne (index .chezmoi "osRelease").id "arch" }}
eval "$(zoxide init bash --cmd cd)"
{{- end }}
