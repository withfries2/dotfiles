# GENERATED BY CHEZMOI - {{ .chezmoi.hostname }} ({{ .role }})
#
# If not running interactively, don't do anything
[[ $- != *i* ]] && return

# --- PATH configuration ---
# Ensure local binaries (Starship, eza, etc.) are prioritized
export PATH="$HOME/.local/bin:/usr/local/bin:$PATH"

# Rust / cargo
if [ -f "$HOME/.cargo/env" ]; then
    . "$HOME/.cargo/env"
fi

# --- Load Shared Aliases (The Master List) ---
# We source the file directly so updates to dot_aliases apply instantly
if [ -f "$HOME/.aliases" ]; then
    . "$HOME/.aliases"
fi

# --- Initialize Starship ---
if command -v starship >/dev/null 2>&1; then
    eval "$(starship init bash)"
fi

# --- Environment Settings ---
export EDITOR="micro"
export VISUAL="code"

# Ghostty/SSH support: Ensure terminfo is checked in the home dir
if [ -d "$HOME/.terminfo" ]; then
    export TERMINFO="$HOME/.terminfo"
fi

# --- Functions ---
# Yazi shell wrapper (Advanced directory changing)
function y() {
    local tmp="$(mktemp -t "yazi-cwd.XXXXXX")" cwd
    yazi "$@" --cwd-file="$tmp"
    if cwd="$(command cat -- "$tmp")" && [ -n "$cwd" ] && [ "$cwd" != "$PWD" ]; then
        builtin cd -- "$cwd"
    fi
    rm -f -- "$tmp"
}

# --- Initialization ---
# Initialize zoxide (smarter cd)
if command -v zoxide >/dev/null 2>&1; then
    eval "$(zoxide init bash --cmd cd)"
fi
